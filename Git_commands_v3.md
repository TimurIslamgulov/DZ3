
 <p align="center"> <img src="https://git-scm.com/images/logo@2x.png"></p>

# <p style="text-align: center;">**Инструкция по командам Git**</p>

Термины и определения заимствованы из данной статьи:<br>
[Шпаргалка по консольным командам Git](https://github.com/cyberspacedk/Git-commands#%D1%88%D0%BF%D0%B0%D1%80%D0%B3%D0%B0%D0%BB%D0%BA%D0%B0-%D0%BF%D0%BE-%D0%BA%D0%BE%D0%BD%D1%81%D0%BE%D0%BB%D1%8C%D0%BD%D1%8B%D0%BC-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0%D0%BC-git)

## Введение
---
__Git__ — система контроля версий (файлов). Что-то вроде возможности сохраняться в компьютерных играх (в Git эквивалент игрового сохранения — коммит). 

    Важно: добавление файлов к «сохранению» двухступенчатое: сначала добавляем файл в индекс (git add), потом «сохраняем» (git commit).

Любой файл в директории существующего репозитория может находиться или не находиться под версионным контролем (отслеживаемые и неотслеживаемые).

Отслеживаемые файлы могут быть в 3-х состояниях: 
- _неизменённые_
- _изменённые_
- _проиндексированные (готовые к коммиту)_

## Ключ к пониманию
---
Ключ к пониманию концепции git — знание о _«трех деревьях»_ :

- ___Рабочая директория___ — файловая система проекта (те файлы, с которыми вы работаете).
Индекс — список отслеживаемых git-ом файлов и директорий, промежуточное хранилище изменений (редактирование, удаление отслеживаемых файлов).
- ___Директория .git/___ — все данные контроля версий этого проекта (вся история разработки: коммиты, ветки, теги и пр.).
- ___Коммит___ — «сохранение» (хранит набор изменений, сделанный в рабочей директории с момента предыдущего коммита). Коммит неизменен, его нельзя отредактировать.

У всех коммитов (кроме самого первого) есть один или более родительских коммитов, поскольку коммиты хранят изменения от предыдущих состояний.

## Простейший цикл работ
---
1.  Редактирование, добавление, удаление файлов (собственно, работа).
2. Индексация (добавление) файлов в индекс (указание для git какие изменения нужно будет закоммитить).
3. Коммит (фиксация изменений).
4. Возврат к шагу 1 или отход ко сну.

## Примеры
---
*создана директория проекта, мы в ней:*

>git init
- Создаём репозиторий в этой директории

>touch readme.md
- Создаем файл readme.md

>git add readme.md
- Добавляем файл в индекс

>git commit -m "Старт"
- Создаем коммит

## Указатели
---
__HEAD__ — указатель на текущий коммит или на текущую ветку (то есть, в любом случае, на коммит). Указывает на родителя коммита, который будет создан следующим.

__ORIG_HEAD__ — указатель на коммит, с которого вы только что переместили HEAD (командой git reset ..., например).

__Ветка__ (master, develop etc.) — указатель на коммит. При добавлении коммита, указатель ветки перемещается с родительского коммита на новый.

__Теги__ — простые указатели на коммиты. Не перемещаются.

---
![logo help](https://valcourcloud-vt.com/rms/images/main/Help.png?1318004512)
## Справка
---

>git help #
- Справка по всем командам Git

---

![logo settings](https://master-otoplenia.ru/wp-content/uploads/2021/03/image011-300x300-1-e1617013964353.png)

## Настройка
---

>git config --global user.name "Your Name"
- Указать имя, которым будут подписаны коммиты

>git config --global user.email "e-mail@post.com"
- Указать электропочту, которая будет в описании коммитера

Если вы в Windows:

>git config --global core.autocrlf true
- Включить преобразование окончаний строк из CRLF в LF

>git init
- Инициализация текущей папки (в которой Git начнёт отслеживать изменения) 

## Просмотр изменений
---

>git status
- Показвает текущее состояние репозитория (отслеживаемые, изменённые, новые файлы и т.п.)

>git diff
- Показывает изменения между вашей текущей рабочей директорией и индексом

>git diff file.txt
- Показывает разницу между текущим файлом и сохраненным в индекс

>git diff HEAD
- Сравнить рабочую директорию и коммит, на который указывает HEAD

>git diff --staged
- Сравнить индекс и коммит с HEAD (для просмотра подготовленных изменений)

## Добавление изменений в индекс
---

>git add .
- Добавляет в индекс все новые, изменённые и удалённые файлы из текущей папки и её подпапок

>git add file.txt
- Добавляет в индекс указанный файл (был изменён, был удалён или это новый файл)

## Удаление изменений из индекса
---

>git reset
- Убирает из индекса все добавленные в него изменения (в рабочей директории все изменения сохранятся), антипод git add

>git reset file.txt
- Убирает из индекса изменения указанного файла (в рабочей директории изменения сохранятся)

## Коммиты
---

>git commit -m "Name of commit"
- зафиксировать в коммите проиндексированные изменения (закоммитить), добавить сообщение

>git commit -am "Name of commit"
- Проиндексировать отслеживаемые файлы (ТОЛЬКО отслеживаемые, но НЕ новые файлы) и закоммитить, добавить описание

## Временно переключиться на другой коммит
---

>git checkout b953
- Переключиться на коммит с указанным хешем (переместить HEAD на указанный коммит, рабочую директорию вернуть к состоянию, на момент этого коммита)

>git checkout master
- Переключиться на коммит, на который указывает master (переместить HEAD на коммит, на который указывает master, рабочую директорию вернуть к состоянию на момент этого коммита)

## Переключиться на другой коммит и продолжить работу с него
---
*Потребуется создание новой ветки, начинающейся с указанного коммита.*
>git checkout -b new-branch 5589877
- Создать ветку new-branch, начинающуюся с коммита c хешем 5589877 (переместить HEAD на указанный коммит, рабочую директорию вернуть к состоянию, на момент этого коммита, создать указатель на этот коммит (ветку) с указанным именем)

## Ветки
---

>git branch
- Показывает список веток

>git branch -v
- Показывает список веток и последний коммит в каждой

>git branch new_branch
- Создёт новую ветку с именем new_branch на текущем коммите

>git branch new_branch 18fecd1e
- Создаёт новую ветку с именем new_branch на указанном коммите

>git checkout new_branch
- Переход в ветку new_branch

>git checkout -b new_branch
- Создаёт новую ветку new_branch и переходит в неё

>git branch -m master main
- Переименовать ветку master в main

>git merge fix
- Вливает в теукущую ветку данные из ветки fix

>git merge fix -m "fixit"
- Вливает в теукущую ветку данные из ветки fix с указанием сообщения коммита слияния

>git rebase fixit
- Объединение изменений веток. Git копирует набор коммитов и переносит их в другое место (будет выглядеть, как будто изменения делались последовательно)

>git branch -d fix
- Удаляет ветку fix (используется, если её изменения уже влиты в главную ветку)

>git config --global init.defaultBranch main
- Изменяет в настройках git имя главной ветки по умолчанию на main

## Восстановление изменений
---
>git checkout 5589877 file.txt
- Bосстановить в рабочей директории указанный файл на момент указанного коммита (и добавить это изменение в индекс)

>git reset file.txt 
- Удаление из индекса, но сохранение изменений в файле)

>git merge --abort
- Отмена слияния, отменяет слияние веток, сразу после слияния, перед коммитом (после коммита не работает)

## Удаление файла
---
>git rm text.txt
- Удалить отслеживаемый неизменённый файл и проиндексировать это изменение

>git rm -f text.txt
- Удалить отслеживаемый изменённый файл и проиндексировать это изменение

>git rm -r log/
- Удалить всё содержимое отслеживаемой директории log/ и проиндексировать это изменение

>git rm ind*
- Удалить все отслеживаемые файлы с именем, начинающимся на «ind» в текущей директории и проиндексировать это изменение

>git rm --cached readme.txt
- Удалить из отслеживаемых индексированный файл (ФАЙЛ ОСТАНЕТСЯ НА МЕСТЕ) (часто используется для нечаянно добавленных в отслеживаемые файлов)

## Перемещение/переименование файлов
---
*Для git не существует переименования. Переименование воспринимается как удаление старого файла и создание нового. Факт переименования может быть определен только после индексации изменения.*

>git mv text.txt test_new.txt
- Переименовать файл «text.txt» в «test_new.txt» и проиндексировать это изменение

>git mv readme_new.md folder/
- Переместить файл readme_new.md в директорию folder/ (должна существовать) и проиндексировать это изменение

## История коммитов
---
*Выход из длинного лога вывода: q*

>git log
- Показать список коммитов созданных в данном репозитории в обратном хронологическом порядке. Эта команда отображает каждый коммит вместе с его контрольной суммой SHA-1, именем и электронной почтой автора, датой создания и комментарием

>git log master
- Показать коммиты в указанной ветке

>git log -2
- Показать последние 2 коммита в активной ветке

>git log -2 --stat
- Показать последние 2 коммита и статистику внесенных ими изменений

>git log -p
- Показать дельту (разницу/diff), привнесенную каждым коммитом

>git log -p -22
- Показать последние 22 коммита и внесенную ими разницу на уровне строк

>git log --graph -10
- Показать последние 10 коммитов с ASCII-представлением ветвления

>git log --since=2.weeks
- Показать коммиты за последние 2 недели

>git log --after '2018-06-30'
- Показать коммиты, сделанные после указанной даты

>>git log file.txt
- Показать историю изменений файла file.txt (только коммиты)

>git log -5 file.txt
- Показать историю изменений файла file.txt, последние 5 коммитов (только коммиты)

>git log -p file.txt
- Показать историю изменений файла file.txt (коммиты и изменения)

>git log -G'myFunction' -p
- Показать все коммиты, в которых менялись строки с myFunction (в кавычках регулярное выражение)

>git log -L '/<head>/','/<\/head>/':file.txt
- Показать изменения от указанного до указанного регулярных выражений в указанном файле

>git log --grep fix
- Показать коммиты, в описании которых есть буквосочетание fix (регистрозависимо, только коммиты текущей ветки)

>git log --grep fix -i
- Показать коммиты, в описании которых есть буквосочетание fix (регистроНЕзависимо, только коммиты текущей ветки)

>git log --grep 'fix(ing|me)' -P
- Показать коммиты, в описании которых есть совпадения для регулярного выражения (только коммиты текущей ветки)

>git log --pretty=format:"%h - %an, %ar : %s" -4
- Показать последние 4 коммита с форматированием выводимых данных

>git log --oneline --decorate
- Опция --oneline сокращает количество занятых строк
- Опция --decorate добавляет относительные имена (локальные/удалённые ветви + HEAD)
- Используя эти две опции, мы получаем более компактный и осмысленный git log

>git reflog
- Команда для отображения журнала всех выполненных действий. Включает в себя слияния, перезагрузки, возвраты: в основном, любые изменения в вашей ветке

>git show 60d6582
- Показать изменения из коммита с указанным хешем

>git show @~
- Показать данные о предыдущем коммите в активной ветке

>git show HEAD~3
- Показать данные о коммите, который был 3 коммита назад

>git show my_branch~2
- Показать данные о коммите, который был 2 коммита назад в указанной ветке

>git show @~:index.html
- Показать контент указанного файла на момент предыдущего (от HEAD) коммита

>git show :/"подвал"
- Показать самый новый коммит, в описании которого есть указанное слово (из любой ветки)

## Кто написал строку
---
>git blame README.md --date=short -L 5,8
- Показать строки 5-8 указанного файла и коммиты, в которых строки были добавлены

![logo GitHub](https://beagleboard.org/static/wp-uploads/2016/12/screenshot-from-2016-12-30-20-49-31.png)

## Работа с удалёнными репозиториями
---
![logo fork](https://git-scm.com/book/en/v2/images/forkbutton.png)

>Создание ответвлений (fork)

- Если вы хотите вносить свой вклад в уже существующие проекты, в которых у нас нет прав на внесения изменений путём отправки (push) изменений, вы можете создать своё собственное ответвление (fork) проекта. Это означает, что GitHub создаст вашу собственную копию проекта, данная копия будет находиться в вашем аккаунте GitHub и вы сможете легко делать изменения путём отправки (push) изменений.
- Для того, чтобы создать ответвление проекта, зайдите на страницу проекта и нажмите кнопку «Создать ответвление» («Fork»), которая расположена в правом верхнем углу. Через несколько секунд вы будете перенаправлены на собственную новую проектную страницу, содержащую вашу копию, в которой у вас есть права на запись.

>git clone https://github.com/TimurIslamgulov/DZ3.git
- Перенос репозитория с GitHub в git на свой ПК

>cd [FolderNameFromGitHub]
- Перемещение в папку с репозиторием

>git pull [link]
- Скачать все изменения из внешнего репозитория и автоматический merge с локальным репозиторием

>git remote add origin [https://github.com:nicothin/test.git]
- Добавляем предварительно созданный пустой внешний репозиторий (GitHub).
В папке, содержащей локальный репозиторий, мы запускаем команду git remote add origin - при этом устанавливается подключение к удаленному серверу и git репозиторию на нем:
- git - это должно быть обязательно;
- remote add - сама команда;
- origin - имя удаленного репозитория, которое дается по умолчанию и далее url-адрес к нему.
- При запуске этой команды в терминале, создается впечатление что ничего не происходит. Но на самом деле теперь наш локальный репозиторий связан с удаленным

>git branch -M main
- Переименовать главную ветку в локальном репозитории (по умолчанию master) в main (Необходимо, чтобы названия веток в локальном и внешнем репозиториях совпадали)

>git push -u origin main
- Отправить данные из локального репозитория во внешний (в ветку main). Требует авторизации на GitHub.
- push в программировании означает заталкивание элемента в массив/стек, или git-ветки на удаленный репозиторий.
- origin - имя удаленного репозитория и main - это ветка удаленного репозитория.
- -u - это ключ, который устанавливает связь с веткой main. Этот ключ указывается единожды. В дальнейшем при использовании команды git push отправка локальных данных на сервер будет связана именно с веткой main. То есть при следующей отправке локального репозиторий на сервер команда git push -u origin main сокращается до git push.