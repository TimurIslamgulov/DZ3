#**Git: краткая инструкция**

## Установка

* MacOS
   - при  использовании менеджера пакетов HomeBrew можно использовать команду brew install git
   - в ином случае вводим комманду git --version, после чего будет предложена установка Git

* Windows
    - перейти по [ссылке](https://git-scm.com/download/win), скачать Git соответствующий архитектуре процессора (32 или 64-bit) и установить его.

* Linux
Установка на Linux зависит от используемого дистрибутива:
    - Debian/Ubuntu - _apt-get install git_
    - Fedora - _yum install git_
Подробности установки по [ссылке](https://git-scm.com/download/linux)        

##Структура директории git

Работа начинается с инициализации структуры директории git при помощи команды _git init_. Это создаст в текущем каталоге новый подкаталог _.git_ со следующим содержанием:
![Структура директории .git](https://habrastorage.org/getpro/habr/upload_files/c70/fa6/208/c70fa6208ebc363490186b7b7a867161.png)
Здесь будет содержаться вся конфигурация Git и история проекта.

##Самые распространенные команды в Git.

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/dfc/c68/df2/dfcc68df2d9384b1ad2c73e873f66af1.png)

Как правило основная работа с системами контроля версий ограничена рядом действий:
1. Внести изменения в проект;
2. Добавить изменения в индекс(staging area) - _git add_ (таким образом вы сообщаете Git какие именно изменения должны быть занесены в историю);
3. Сохранить изменения в историю проекта - _git commit_;
4. Отправить результаты работы на удаленный сервер, чтобы другие разработчики тоже имели к ним доступ (_git push_).

* Команда _git status_
    отображает состояние директории и индекса(staging area). Это позволяет определить, какие файлы в проекте отслеживаются Git, а также какие изменения будут включены в следующий коммит.
* Команда _git add \<file>_
    добавляет файл в индекс.
* Команда _git commit -m "commit comment"
    сохраняет изменения и оставляет комментарий.
* Команда _git remote add <remote_name> <remote_repo_url>_
    добавляет репозиторий в Git. Она сопоставляет удаленное хранилище с ссылкой на локальный репозиторий.
* Команда _git push origin_
    отправляет результат работы в репозиторий.

## Работа с историей

![](https://habrastorage.org/getpro/habr/upload_files/ec0/40c/542/ec040c5421ffc2e19d93ab68ec3825ee.png)

Команды для инспектирования истории в Git:
*  git log
* git show
* git reflog
* git reset

1. Команда _git log_
    отображает всю историю изменений. Она имеет огромное множество дополнительных параметров, которые могут влиять на вывод в консоль:
    - _git log -3_ вызывает последние три коммита;
    - _git log --oneline_ выводит все коммиты в одну линию.
Подробнее с ними можно ознакомиться по [ссылке](https://git-scm.com/docs/git-log#:~:text=shown.-,OPTIONS,---follow).

2. Команда _git show_
     используется для отображения полной информации о любом объекте в Git, будь то коммит или ветка. По умолчанию git show отображает информацию коммита, на который в данный момент времени указывает HEAD.
     Для удобства работы git show оснащен рядом дополнительных параметров:
     - _git show 349de9d..957e113_ - комманда выводит диапазон из указанных коммитов. Диапазон указывается полуоткрытым интервалом, содержащим id коммитов, не включая первый элемент;
     - _git show --oneline_ - команда ля более лаконичного вывода. Ею можно сократить id коммита, а также исключить авторство и дату коммита.
     Подробнее с командой можно ознакомиться по [ссылке](https://git-scm.com/docs/git-show).

3. Команда _git reflog_
    выводит упорядоченный список коммитов, на которые указывал HEAD. Иначе говоря, она отображает историю всех перемещений по проекту. С помощью этой  команды возможно проинспектировать момент утраты нужной информации и откатиться обратно в случае, если была случайно удалена часть истории, или произошёл откат назад. Git reflog хранит свою информацию на компьютере отдельно от коммитов.

4. Команда _git reset_
    позволяет откатить проект до оппраделенного момента.

![](https://habrastorage.org/r/w1560/getpro/habr/upload_files/5da/2f2/13c/5da2f213c5069f56d575682853cc1811.jpeg)

Эту команду можно использовать с тремя параметрами:
* _git reset --soft \<commit>_
    содержимое индекса, а также рабочей директории, остается неизменным. Это значит, что если откатиться назад на пару коммитов, можно изменить ссылку указателя HEAD на указанный коммит и все изменения, которые были до этого внесены, окажутся в индексе.
* _git reset --mixed \<commit>_
    изменится ссылка указателя HEAD, но все предыдущие изменения в индекс не попадут, а будут отслеживаться как не занесенные в индекс. Это дает возможность внести в индекс только те изменения, которые необходимы.
* git reset --hard \<commit>
    изменится ссылка указателя HEAD, но все предыдущие изменения не попадут ни в индекс, ни в зону отслеживаемых файлов. Это значит, что полностью сотрутся все изменения, которые внесены ранее. Это удобно, если предыдущая работа над проектом больше не пригодится.

## Ветвления в git

_Ветвление_ - это возможность одновременно работать над разными версиями проекта. Это удобно, когда над одним проектом работает команда.
Для создания ветки в проекте используется команда _git branch \<name>_. 
Количество и имена веток можно посмотреть, введя команду _git branch_. Звёздочкой будет указано на ветку, на которой ведётся работа. 
Для перехода на другую ветку используется команда _git checkout \<branch_name>_.
Переместить проделанную работу из дополнительной ветки в основную можно при помощи команды _git merge <branch_name>_ на основной ветке _master_, а ненужную ветку можно удалить с помощью команды _git branch -d <branch_name>_. 
Стоит учесть, что при слиянии веток иногда возможно возникновение конфликтов, которые приходится разрешать вручную. Как правило это происходит при слиянии двух веток, в которых одновременно велась какая-то работа. Или же когда в новой ветке допускались изменения старой.

# Работа с удалённым репозиторием

**GitHub** - это самый популярный среди доступных бесплатных сервисов, позволяющий работать с удалёнными репозиториями.

## Скачивание файлов для локального репозитория

1. Создать папку на ПК для будущего репозитория;
2. Открыть созданную папку в VSCode;
3. Перейти на GitHub.com;
4. Через поиск найти нужный репозиторий;
5. Копировать ссылку;
6. В VSCode убедиться, что git не настроен (git status);
7. Скачать репозиторий командой в теминале *git clone <ссылка>*;

В созданной папке появится скачанный репозиторий. Перед началом работы нужно переместиться в папку репозитория командой *cd <имя папки с репозиторием>*.

## Выкладывание репозитория в GitHub.

Для создания удалённого репозитория нужно быть зарегестрированным в GitHub. Аккаунт GitHub должен быть связан с git на пк.

1. Войти в аккаунт GitHub;
2. Создать новый репозиторий;
3. Перейти по ссылке *"Create repository"*;
4. Из предложенных советов выбрать второй и следовать подсказкам.

На сайте во вкладке *<>Code* появится отправленный файл. Для передачи файла кому-либо нужно передать на него ссылку. Если аккаунт публичный, то любой человек перейдя по ссылке сможет скопировать себе репозиторий.

## Внесение изменений в репозиторий.

Если изменения произошли в локальном репозитории, то их можно выложить на GitHub командой *git push*.
В удалённом репозитории так же можно вносить изменения:
1. Выбрать репозиторий в GitHub;
2. Нажать на редактирование;
3. Внести изменения;
4. Добавить комментарий;
5. Нажать *Commit changes*.

Просмотреть историю изменений на GitHub можно нажав *History*.

Чтобы скачать изменения в локальный репозиторий, в VSCode вводим *git pull*.

## Направление предложения на изменение удалённого репозитория.

1. В скачанном репозитории создать ветку и перейти на неё;
2. Создать файл;
3. Внести изменение;
4. Закоммитить;
5. Направить на удалённый репозиторий *(git push --set-upstream_origin_description)*;
6. Перейти на GitHub, нажать *master*;
7. Нажать *Compare & pull request*.

Далее, если нет никаких проблем, добавляем описание и текст обращения. И наравляем кнопкой *Create pull request*.