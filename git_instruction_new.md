# Что такое Git и зачем он нужен?

Git - это консольная утилита для отслеживания и ведения истории изменения файлов в вашем проекте. Чаще всего его используют для кода, но можно и для других файлов. 

`Например, для картинок - полезно для дизайнеров.`

С помощью Git-a вы можете откатить свой проект до более старой версии, сравнивать, анализировать или сливать свои изменения в репозиторий.

Репозиторием называют хранилище вашего кода и историю его изменений. Git работает локально и все ваши репозитории хранятся в определенных папках на жестком диске.

Так же ваши репозитории можно хранить и в интернете. Обычно для этого используют три сервиса:

[GitHub](https://github.com)
[Bitbucket](https://bitbucket.org)
[GitLab](https://about.gitlab.com)
 
Каждая точка сохранения вашего проекта носит название коммит (commit). У каждого commit-a есть hash (уникальный id) и комментарий. Из таких commit-ов собирается ветка. Ветка - это история изменений. У каждой ветки есть свое название. Репозиторий может содержать в себе несколько веток, которые создаются из других веток или вливаются в них.

## Как работает

Если посмотреть на картинку, то становится чуть проще с пониманием. Каждый кружок - это commit. Стрелочки показывают направление, из какого commit сделан следующий. Например, C3 сделан из С2 и т. д. Все эти commit находятся в ветке под названием main. Это основная ветка, чаще всего ее называют master. Прямоугольник main* показывает в каком commit мы сейчас находимся, проще говоря, указатель.

![Рис.1](https://habrastorage.org/r/w1560/getpro/habr/upload_files/753/f85/4b2/753f854b2ca82a2a5112e9717d1a5856.png)

В итоге получается очень простой граф, состоящий из одной ветки (main) и четырех commit. Все это может превратиться в более сложный граф, состоящий из нескольких веток, которые сливаются в одну.

![Рис.2](https://habrastorage.org/getpro/habr/upload_files/137/e03/4ea/137e034eadd3c4459a734354a029fb1a)

Об этом мы поговорим в следующих статьях. Для начала разберем работу с одной веткой.

## Установка

Основой интерфейс для работы с Git-ом является консоль/терминал. Это не совсем удобно, тем более для новичков, поэтому предлагаю поставить дополнительную программу с графическим интерфейсом (кнопками, графиками и т.д.). О них я расскажу чуть позже.

Но для начала все же установим сам Git.

* Windows. Проходим по этой [ссылке](https://git-scm.com/download/win), выбираем под вашу ОС (32 или 64 битную), скачиваем и устанавливаем.

* Для Mac OS. Открываем терминал и пишем:

```bash
#Если установлен Homebrew
brew install git

#Если нет, то вводим эту команду. 
git --version
#После этого появится окно, где предложит установить Command Line Tools (CLT).
#Соглашаемся и ждем установки. Вместе с CLT установится и git
```

* Linux. Открываем терминал и вводим следующую команду.

```bash
# Debian или Ubuntu
sudo apt install git

# CentOS
sudo yum install git
```

## Настройка

Вы установили себе Git и можете им пользоваться. Давайте теперь его настроим, чтобы когда вы создавали commit, указывался автор, кто его создал.

Открываем терминал (Linux и MacOS) или консоль (Windows) и вводим следующие команды.

```bash
#Установим имя для вашего пользователя
#Вместо <ваше_имя> можно ввести, например, Grisha_Popov
#Кавычки оставляем
git config --global user.name "<ваше_имя>"

#Теперь установим email. Принцип тот же.
git config --global user.email "<адрес_почты@email.com>"
```

## Создание репозитория
Теперь вы готовы к работе с Git локально на компьютере.
Создадим наш первый репозиторий. Для этого пройдите в папку вашего проекта.

```bash
#Для Linux и MacOS путь может выглядеть так /Users/UserName/Desktop/MyProject
#Для Windows например С://MyProject
cd <путь_к_вашему_проекту>

#Инициализация/создание репозитория
git init
```

Теперь Git отслеживает изменения файлов вашего проекта. Но, так как вы только создали репозиторий в нем нет вашего кода. Для этого необходимо создать commit.

```bash
#Добавим все файлы проекта в нам будующий commit
git add .
#Или так
git add --all

#Если хотим добавить конкретный файл то можно так
git add <имя_файла> 

#Теперь создаем commit. Обязательно указываем комментарий.
#И не забываем про кавычки
git commit -m "<комментарий>"
```

Отлично. Вы создали свой первый репозиторий и заполнили его первым commit.

## Процесс работы с Git

Не стоит после каждого изменения файла делать commit. Чаще всего их создают, когда:

1. Создан новый функционал
2. Добавлен новый блок на верстке
3. Исправлены ошибки по коду
4. Вы завершили рабочий день и хотите сохранить код

Это поможет держать вашу ветки в чистоте и порядке. Тем самым, вы будете видеть историю изменений по каждому нововведению в вашем проекте, а не по каждому файлу.

### Визуальный интерфейс

Как я и говорил ранее, существуют дополнительные программы для облегчения использования Git. Некоторые текстовые редакторы или полноценные среды разработки уже включают в себя вспомогательный интерфейс для работы с ним.

Но существуют и отдельные программы по работе с Git. Могу посоветовать эти:

* [GitHub Desktop](https://desktop.github.com/)
* [Sourcetree](https://www.sourcetreeapp.com/)
* [GitKraken](https://www.gitkraken.com/)

Я не буду рассказывать как они работают. Предлагаю разобраться с этим самостоятельно.

### Создаем свой первый проект и выкладываем на GitHub

Давайте разберемся как это сделать, с помощью среды разработки Visual Studio Code (VS Code).

Перед началом предлагаю зарегистрироваться на GitHub.

Создайте папку, где будет храниться ваш проект. Если такая папка уже есть, то создавать новую не надо.

После открываем VS Code.

![Рис.3](https://habrastorage.org/getpro/habr/upload_files/415/4fe/297/4154fe297d8f2d82b7d7c4f44b986e00) 

1. Установите себе дополнительно анализаторы кода для JavaScript и PHP
2. Откройте вашу папку, которую создали ранее

После этого у вас появится вот такой интерфейс:

![Рис.4](https://habrastorage.org/getpro/habr/upload_files/536/76a/b32/53676ab32ff10608c9a4748af3740cbd)

1. Здесь будут располагаться все файлы вашего проекта.
2. Здесь можно работать с Git-ом.
3. Кнопка для создания нового файла.
4. Кнопка для создания новой папки.

```bash
Если ваш проект пустой, как у меня, то создайте новый файл и назовите его index.html. После этого откроется окно редактирование этого файла. Напишите в нем ! и нажмите кнопку Tab. Автоматически должен сгенерироваться скелет пустой HTML страницы. Не забудьте нажать ctrl+s чтобы файл сохранился.
```
Давайте теперь перейдем во вкладу для работы с Git-ом. Откроется вот такое окно:

![Рис.5](https://habrastorage.org/getpro/habr/upload_files/dcf/64a/da5/dcf64ada515fad57d956537797626035)

1. Кнопка для публикации нашего проекта на GitHub
2. После нажатия на кнопку 1 , появится всплывающее окно. Нужно выбрать второй вариант или там где присутствует фраза ...public repository

```bash

Если вы хотите создать локальный репозиторий и опубликовать код в другой сервис, то необходимо нажать на кнопку Initialize Repository . После этого, вручную выбрать сервис куда публиковать.
```

После того, как выбрали "Опубликовать на GitHub публичный репозиторий" (пункт 2), программа предложит вам выбрать файлы, которые будут входить в первый commit. Проставляем галочки у всех файлов, если не проставлены и жмем ОК. Вас перекинет на сайт GitHub, где нужно будет подтвердить вход в аккаунт.

Вы создали и опубликовали репозиторий на GitHub.

Теперь сделаем изменения в коде и попробуем их снова опубликовать. Перейдите во вкладку с файлами, отредактируйте какой-нибудь файл, не забудьте нажать crtl+s (Windows) или cmd+s (MacOS), чтобы сохранить файл. Вернитесь обратно во вкладу управления Git.

![Рис.6](https://habrastorage.org/getpro/habr/upload_files/72a/ac6/9eb/72aac69eb4ebe95064aaa08b844cb8dd)

Если посмотреть на значок вкладки Git, то можно увидеть цифру 1 в синем кружке. Она означает, сколько файлов у нас изменено и незакоммичено. Давайте его закоммитим и опубликуем:
1. Кнопка для просмотра изменений в файле. Необязательно нажимать, указал для справки
2. Добавляем наш файл для будущего commit
3. Пишем комментарий
4. Создаем commit
5. Отправляем наш commit в GitHub

Поздравляю, вы научились создавать commit и отправлять его в GitHub!

## Итог

Это первая вводная статья по утилите Git. Здесь мы рассмотрели:
* Как его устанавливать
* Как его настраивать
* Как инициализировать репозиторий и создать commit через консоль
* Как на примере VS Code, опубликовать свой код на GitHub

Забегая вперед, советую вам погуглить, как работают следующие команды:

```bash

git help # справка по всем командам
git clone
git status
git branch
git checkout
git merge
git remote
git fetch
git push
git pull

```
## Совместная работа
Представим, что вы с друзьями придумали проект, с "блэкджеком" и ... Вы разделили обязанности. Кто-то будет делать авторизацию и регистрацию, а кто-то функционал вывода новостей. Для этого вам пригодится ветвление.

![Рис.7](https://habrastorage.org/r/w1560/getpro/habr/upload_files/753/f85/4b2/753f854b2ca82a2a5112e9717d1a5856.png)

**Ветка** - это набор commit (кружок), которые идут друг за другом. У ветки есть название, основную ветку чаще всего называют master (на картинках будет называться main) . Если говорить простыми словами, то ветка master - это наш проект.

Другие ветки - это отдельное место для реализации нового функционала или исправление багов (ошибок) нашего проекта. То есть, с отдельной веткой вы делаете что угодно, а затем сливаете эти изменения в основную ветку master.

Не рекомендую создавать commit напрямую в master. Лучше для этого заводить новую ветку и все изменения писать там.

Для того, чтобы создать новую ветку вводим:

```bash
git branch <название_ветки>

#или вот так

git checkout -b <название_ветки>
```

![Рис.8](https://habrastorage.org/r/w1560/getpro/habr/upload_files/2c3/0a1/699/2c30a16996c18d3c2496bb6bde28cc90.png)

Эти команды делают тоже самое, только второй вариант позволяет сразу переключиться в новую ветку. Вносить изменения в новую ветку можно сразу после ее создания.

При создании новой ветки, старайтесь называть ее кратким и ёмким именем. Чтобы сразу было понятно, что именно изменялось по проекту. Если вы используете, какую-нибудь систему для ведения задач, то можете в начале названия ветки указывать ID задачи, чтобы можно было легко найти, на основе какой задачи была создана ветка. Например вот так:

```bash
3424_fix_catalog_ajax
```

В каждом новом commit следует оставлять коммент и в нем описывать суть изменений.

Переключаться между ветками можно такой командой:

```bash
git checkout <название_ветки>
```

После того, как вы завершили работу над своей задачей, ветку можно слить в master. Для этого нужно переключиться в ветку master и выполнить следующую команду:

```bash

# Переключаемся в master
git checkout master
# Обновляем локальную ветку с сервера
git pull origin master

# Делаем merge вашей ветки, в ветку в которой вы находитесь
# В данном примере это master
git merge <название_ветки>
```

![Рис.9](https://habrastorage.org/r/w1560/getpro/habr/upload_files/574/bb2/a87/574bb2a8719a01dad2f63e803f550a66.png)

❗️ Перед тем как сливать новый merge, стоит обновить локальную ветку master , во избежания дальнейших проблем.
Команда merge берет все изменения из ветки (например bugFix) и добавляет их в ветку master.

Для того чтобы посмотреть текущее состояние ветки, например, какие файлы добавлены или не добавлены для создания commit, можно выполнить команду:

```bash
git status
```

Другие пользователи не увидят вашу ветку, пока она не будет отправлена на удаленный репозиторий. Поэтому, после того как вы слили все изменения в master, нужно отправить их в GitHub. Для этого обязательно нужно находиться в ветке master:

```bash

git checkout master

# Отправляем наши изменения в GitHub
git push origin master
```

Теперь все ваши изменения, в ветке master улетели в GitHub. Таким же образом, можно отправить любую другую ветку:

```bash

git checkout <название_ветки>
git push origin <название_ветки>
```

Совет. Каждый коммит, лучше заливать сразу в удаленный репозиторий. Никто не застрахован, поломки собственного ПК. Поэтому чтобы не потерять все наработки, не забывайте сливать ваши изменения на GitHub.

**Как же теперь другой человек получит все ваши изменения?**
Для этого вам понадобиться GitHub или любой другой сервис для хранения кода. В прошлой статье я рассказывал как отправить код в GitHub. Сейчас я покажу, как его скопировать обратно себе на компьютер.

Если у вашего друга раньше не было проекта, то ему придется его "клонировать" себе:

```bash
git clone <адрес_репозитория>
```

![Рис.10](https://habrastorage.org/r/w1560/getpro/habr/upload_files/a84/b99/f71/a84b99f712637dd2fb37b93e62f8a48c.png)

Адрес репозитория на GitHub можно получить, нажав на зеленую кнопку Code.

После выполнения команды, в папке где появиться проект и ваш друг сможет с ним работать. Все ветки и их история также подтянуться.

####Теперь самое главное

Перед тем, как создавать новый функционал и новую ветку, стоит обновить master на вашем устройстве. Для этого нужно находиться в этой ветке и выполнить следующую команду:

```bash
# Переключаемся в master
git checkout master

# Подтягиваем изменения из репозитория GitHub
git pull origin master
```

Таким же образом можно актуализировать любую другую ветку, заменив название ветки master на вашу.

Для обновления всех веток сразу, можно использовать такую, команду, но не рекомендую:

```bash
git pull
```

Теперь можно создавать новую ветку и кодить.

###Какие проблемы могут возникнуть?

Git старается автоматически сливать изменения, однако это не всегда возможно. Иногда возникают конфликты. Например, когда в двух ветках были изменения в одной и той же строчке кода. Если такое произошло, то необходимо разрешить конфликт вручную. Для этого откройте файл там, где этого произошло. Например, вы можете увидеть что-то подобное:

```bash
# Вы пытались выполнить это
git checkout new_styles
git merge master

# В конце увидели это
Auto-merging index.html
CONFLICT (content): Merge conflict in index.html
Automatic merge failed; fix conflicts and then commit the result.
```

```bash
<html>
  <head>
<<<<<<< HEAD
    <link type="text/css" rel="stylesheet" media="all" href="style.css" />
=======
    <!-- подключение стилей отсутствуют, по какой-то причине -->
>>>>>>> master
  </head>
  <body>
    <h1>Hello,World!</h1>
  </body>
</html>
```

Первый раздел (HEAD) - это то, что находиться в текущей ветке, куда вы пытались слить код. Второй раздел (между ==== и >>>>master) - версия кода в ветке, откуда вы пытались слить код (в данном случае master). Для того, чтобы разрешить конфликт, стоит оставить стили и привести файл в такой вид:

```bash
<html>
  <head>
    <link type="text/css" rel="stylesheet" media="all" href="style.css" />
  </head>
  <body>
    <h1>Hello,World!</h1>
  </body>
</html>
```

После внесения нужных изменений добавьте ваш файл через git add <имя_файла> как измененный и создайте новый commit:

```bash

git add index.html
git commit -m "Merged master fixed conflict."
```

**Вспомогательные команды**
Просмотреть изменения относительно двух веток можно командой:

```bash
git diff <исходная_ветка> <целевая_ветка>
```

Удалить ненужную ветку:

```bash
git branch -d <название_ветки>
```

Просмотр истории ветки:
```bash
git log
```

Подсказки по популярным командам:

```bash
# По популярным командам
git help

# Или по конкретной команде
git help <название_команды>

# Например clone
git help clone
```

**Практика и вспомогательные инструменты**
Для улучшения ваших навыков, в очередной раз оставлю ссылку на полезный [тренажер с заданиями](https://learngitbranching.js.org/).

Так же, для удобства использования в Visual Studio Code, советую поставить это [расширение](https://marketplace.visualstudio.com/items?itemName=mhutchie.git-graph), которое визуализирует ваши ветки и commit, и помогает с ними работать.

### Основные команды:
**git log** — вызывать список действий и сохранений,
**git init** — создать репозиторий в папке на локальной машине, 
**git add** — отслеживать добавленные файлы,
**git commit + комментарий** — сохранить текущее состояние, 
**git diff** — показать разницу между версиями,
**git chechout** — переключиться между разными версиями.

Начиная с Git версии 2.23, вы можете использовать git switch вместо git checkout , чтобы:
Переключиться на существующую ветку: git switch testing-branch.

## Работа с удаленными репозиториями 

Скачивание из текущего репозитория и слияние со своей версией.

Освоить работу с удаленными репозиториями, которые находятся не на локальной,  а на удаленной машине, например, на сервере.

Копировать внешний репозиторий на свой ПК можно командой **git clone**.

При запуске команды git init всё происходит только в локальном репозитории: в папке на компьютере пользователя, эту папку создавшего. Но для работы в команде программисты используют удаленные репозитории.

Команда **git clone** составная: она не только загружает все изменения, но и пытается слить  все ветки на локальном компьютере и в удаленном репозитории.

**git pull** - эта команда позволяет скачать все 
из текущего репозитория и автоматически сделать merge с нашей версией

**git push** - отправить свою версию репозитория во внешний репозиторий поможет команда git push. При первом её использовании нужна авторизация.
Эта команда позволяет отправить нашу версию репозитория на внешний репозиторий. ТРЕБУЕТ АВТОРИЗАЦИИ  на внешнем репозитории.

## Как настроить совместную работу
1. Создать аккаунт на GitHub.com.
2. Создать локальный репозиторий.
3. “Подружить”ваш локальный и удалённый репозитории.
GitHub при создании нового репозитория подскажет, как это можно сделать.
4. Отправить (push) ваш локальный репозиторий в удалённый(на GitHub), при этом, возможно, вам нужно будет авторизоваться на удалённом репозитории.
5. Провести изменения “с другого компьютера”.
6. Выкачать (pull) актуальное состояние из удалённого репозитория.


**pull request**
➜ команда для предложения изменений
➜ запрос на вливание изменений в репозиторий

В больших компаниях один ответственный за проект создает аккаунт. Другие пользователи дают команду **pull request**. Предлагать изменения на GitHub нужно в отдельной ветке. Сначала пользователь копирует репозиторий на свой компьютер, делает fork репозитория, затем клонирует версию на своём ПК, создаёт ветку с предлагаемыми изменениями, отправляет изменения командой push в свой аккаунт на GitHub и даёт команду pull request.


#### Делаем fork (ответвление) репозитория
1. Делаем git clone СВОЕЙ версии репозитория. 
2. Создаем новую ветку и в НЕЕ вносим свои изменения. 
3. Фиксируем изменения (делаем коммиты).
4. Отправляем свою версию в свой GitHub.
5. На сайте GitHub нажимаем кнопку pull request.